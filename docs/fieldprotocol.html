<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>eBirdCBC - eBirdCBC field protocol</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="index.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">eBirdCBC</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-for-cbc-counters" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">For CBC Counters</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-for-cbc-counters">    
        <li>
    <a class="dropdown-item" href="./fieldprotocol.html" rel="" target="">
 <span class="dropdown-text">Field Protocol</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-for-area-leaders" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">For Area Leaders</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-for-area-leaders">    
        <li>
    <a class="dropdown-item" href="./eBirdCBCmethods.html" rel="" target="">
 <span class="dropdown-text">Overall Methods</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-examples" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Examples</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-examples">    
        <li>
    <a class="dropdown-item" href="./abbottslagoon.html" rel="" target="">
 <span class="dropdown-text">Abbotts Lagoon</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tennesseevalley.html" rel="" target="">
 <span class="dropdown-text">Tennessee Valley</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-using-the-program" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Using the Program</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-using-the-program">    
        <li>
    <a class="dropdown-item" href="./usingtheprogram.html" rel="" target="">
 <span class="dropdown-text">eBird CBC program</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./contact.html" rel="" target="">
 <span class="menu-text">Contact</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#protocol-for-ebirding-a-cbc" id="toc-protocol-for-ebirding-a-cbc" class="nav-link active" data-scroll-target="#protocol-for-ebirding-a-cbc">Protocol for eBirding a CBC!</a>
  <ul class="collapse">
  <li><a href="#before-the-count" id="toc-before-the-count" class="nav-link" data-scroll-target="#before-the-count">Before the count</a></li>
  <li><a href="#field-protocol-ebird-lists-tracks" id="toc-field-protocol-ebird-lists-tracks" class="nav-link" data-scroll-target="#field-protocol-ebird-lists-tracks">Field protocol: eBird lists &amp; tracks</a></li>
  <li><a href="#keeping-track-of-the-effort-and-bird-details-by-hand" id="toc-keeping-track-of-the-effort-and-bird-details-by-hand" class="nav-link" data-scroll-target="#keeping-track-of-the-effort-and-bird-details-by-hand">Keeping track of the effort and bird details by hand</a></li>
  <li><a href="#example-table-for-raptors-and-large-birds" id="toc-example-table-for-raptors-and-large-birds" class="nav-link" data-scroll-target="#example-table-for-raptors-and-large-birds">Example Table for Raptors and Large Birds</a></li>
  <li><a href="#it-is-really-important-to" id="toc-it-is-really-important-to" class="nav-link" data-scroll-target="#it-is-really-important-to"><strong>It is really important to:</strong></a></li>
  <li><a href="#after-the-count" id="toc-after-the-count" class="nav-link" data-scroll-target="#after-the-count">After the count:</a></li>
  <li><a href="#reminders-dos-hints-tips-tricks-donts" id="toc-reminders-dos-hints-tips-tricks-donts" class="nav-link" data-scroll-target="#reminders-dos-hints-tips-tricks-donts">Reminders: Do’s, Hints, Tips &amp; tricks, Don’ts</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">eBirdCBC field protocol</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- Before the count, Field protocol, After the count, Reminders: Do's-Don'ts, Hints, Tips & tricks -->
<section id="protocol-for-ebirding-a-cbc" class="level1">
<h1>Protocol for eBirding a CBC!</h1>
<p>eBirdCBC uses <a href="https://ebird.org/home">eBird</a> and <a href="https://ebird.org/news/ebird-ios-automatic-tracks-available/">eBird tracks</a> to record all bird and participant data, automating the summary of territory counts for the Christmas Bird Count (CBC). This is combined with <a href="https://ebird.org/about/ebird-mobile/">eBird mobile</a> and manual data collection throughout the day, including capturing effort details and sightings of raptors and large birds.</p>
<section id="before-the-count" class="level3">
<h3 data-anchor-id="before-the-count">Before the count</h3>
<ul>
<li>Familiarize yourself with this protocol.</li>
<li>Get your team assignment from your area leader.</li>
<li>Practice by birding in your assigned area during <a href="https://www.audubon.org/conservation/science/christmas-bird-count/christmas-bird-count-compiler-resources#:~:text=Count%20week%20is%20defined%20as,Dec%2014%2DJan%205">count-week</a> the 3 days before or after your CBC if you can.</li>
<li>Ensure you have <a href="https://ebird.org/about/ebird-mobile/">eBird Mobile</a> working, Bring a spare battery for your phone, print out data forms provided by your area leader, prepare for a long-day birding.</li>
</ul>
</section>
<section id="field-protocol-ebird-lists-tracks" class="level3">
<h3 data-anchor-id="field-protocol-ebird-lists-tracks">Field protocol: eBird lists &amp; tracks</h3>
<p><strong>For a given team</strong>, designate a team member to use <a href="https://ebird.org/about/ebird-mobile/">eBird mobile</a> to track team location and log birds using one of the following methods:</p>
<ul>
<li>Activate eBird starting a new list enabling eBird tracks.
<ul>
<li>Tally birds at the same time on the app.
<ul>
<li>-or put your phone in your pocket and-</li>
</ul></li>
<li>Write the date, time, location &amp; each bird encountered on paper and transfer to eBird mobile ASAP. See this <a href="input/eBird_CBC_2024_to_print.pdf">convenient PDF form</a> for the latter.</li>
</ul></li>
<li>Either way, <a href="https://ebird.org/news/ebird-ios-automatic-tracks-available/">eBird Mobile tracks</a> allow us to divide observations by route for us to automatically compile in eBird.</li>
</ul>
</section>
<section id="keeping-track-of-the-effort-and-bird-details-by-hand" class="level3">
<h3 data-anchor-id="keeping-track-of-the-effort-and-bird-details-by-hand">Keeping track of the effort and bird details by hand</h3>
<p><strong>Designate a second member</strong> as a ‘back-up’ to log participants, effort, raptors &amp; large flyover birds, and rare bird notes on paper to later transcribe the following into the eBird memo:</p>
<ul>
<li>Team name and list number (i.e.&nbsp;Haypress #1).</li>
<li>The name (initials) of each participant.&nbsp;</li>
<li>Exact start and stop times &amp; locations for each list (sometimes eBird tracks fail).</li>
<li>Note the weather: cloud cover, temperature, wind (<a href="https://www.weather.gov/mfl/beaufort">Beaufort scale</a>) &amp; precipitation (none, trace, light, medium, heavy).</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/effortmemo.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Example of effort memo for a given list. Note everything needed to figure out the who, the where, the when, the weather, the raptors and large birds as well as the route. In this case the user employed <a href="https://www.birdpop.org/docs/misc/Alpha_codes_eng.pdf">4-letter bird codes</a> to indicate the raptors: AMKE = American Kestrel, NOHA = Northern Harrier.</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/_esc6382.jpeg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Northern Harrier flying past at Tennessee Valley CBC, © D. Kapan 2017</figcaption>
</figure>
</div>
<div id="northernharrier" class="wide-image">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/_esc6382.jpeg" class="img-fluid figure-img" width="100"></p>
<figcaption class="figure-caption">Northern Harrier flying past at Tennessee Valley CBC, © D. Kapan 2017</figcaption>
</figure>
</div>
</div>
<p>With raptors and other large mobile birds it is crucial to track for accurate counts and movement patterns:</p>
<ul>
<li>Record species, time, location, flight direction, age, sex, plumage, behavior, and other details.</li>
<li>Use a paper tally sheet to ensure data consistency.</li>
<li>Add this information to species comments in eBird after the count.</li>
<li>These data help prevent double-counting across subareas and are required by CBC compilers.</li>
</ul>
</section>
<section id="example-table-for-raptors-and-large-birds" class="level3">
<h3 data-anchor-id="example-table-for-raptors-and-large-birds">Example Table for Raptors and Large Birds</h3>
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 4%">
<col style="width: 13%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 35%">
</colgroup>
<tbody>
<tr class="odd">
<td>Species</td>
<td>Location</td>
<td>Time</td>
<td>Flight direction</td>
<td>Age</td>
<td>Sex</td>
<td>Plumage</td>
<td>Notes</td>
</tr>
<tr class="even">
<td>Golden Eagle</td>
<td>M-ranch entry road</td>
<td>0915</td>
<td>NE</td>
<td>Adult</td>
<td>NA</td>
<td>NA</td>
<td>This bird was flying high and fast.</td>
</tr>
<tr class="odd">
<td>Northern Harrier</td>
<td>M-ranch entry road</td>
<td>0920</td>
<td>N</td>
<td>Adult</td>
<td>Male</td>
<td>NA</td>
<td>Harrying low flying into the Yellow territory</td>
</tr>
</tbody>
</table>
</section>
<section id="it-is-really-important-to" class="level3">
<h3 data-anchor-id="it-is-really-important-to"><strong>It is really important to:</strong></h3>
<ul>
<li><strong>Switch eBird lists</strong> and <strong>by-hand effort</strong> notes at the same time throughout the day for each different assigned route/list area.</li>
<li><strong>Create a new list</strong> even when you are returning across your or another team’s route/polygon.</li>
<li><strong>Start a new eBird list</strong> with new metadata for any changes in team membership.&nbsp;</li>
<li><strong>eBird lists</strong> will help us keep track of <strong>birds</strong> AND CBC effort data: <strong>total party miles</strong> (one-way distance) and <strong>total party hours</strong> (nearest minute).</li>
<li><strong>Document</strong> <strong>Rare Birds and put this documentation on paper and into your eBird lists:</strong> <a href="https://ebird.freshdesk.com/en/support/solutions/articles/48000803130">tips for documenting unusual observations</a>. Also you can print up downloadable <a href="https://media.audubon.org/2024-08/cbc_rare_bird_form.pdf?_gl=1*1u7e1yb*_gcl_au*MTE3ODQwMDM4NS4xNzMzNDcwMzAz*_ga*OTAzOTIyNjM0LjE3MzM0NzAzMDQ.*_ga_X2XNL2MWTT*MTczMzUwODIzOC4yLjEuMTczMzUwODc2Mi42MC4wLjA.">rare bird forms</a>.</li>
<li><strong>Photographs</strong>: Photos and/or audio recordings of diagnostic vocalizations are the best evidence of a rare bird. Photos are preferably of good quality showing diagnostic features.</li>
</ul>
</section>
<section id="after-the-count" class="level3">
<h3 data-anchor-id="after-the-count">After the count:</h3>
<ul>
<li><strong>Upload and Share</strong>: Last but not least–after your eBird lists are all set and uploaded to eBird, share them with your area leader’s ‘area persona’ (the eBird username that the area leader uses to aggregate all the day’s lists) using the share function either from eBird mobile, or from the your eBird list on the web interface. If they ask you to correct something, do so and RESHARE back to their eBird persona.</li>
</ul>
</section>
<section id="reminders-dos-hints-tips-tricks-donts" class="level3">
<h3 data-anchor-id="reminders-dos-hints-tips-tricks-donts">Reminders: Do’s, Hints, Tips &amp; tricks, Don’ts</h3>
<ul>
<li>Each team covers their assigned route/polygon starting at sunrise early in the day. If you then traverse another team’s area, or a part of it, start a new list following their area/list assignments.</li>
<li>Create a new eBird list for each location your area leader suggests, such as for each unique habitat within your ‘birdshed’ or count area along your route or polygon, with eBird tracks enabled. This serves as the foundation for both bird observations and CBC effort data (see below for hints on manual data collection).</li>
<li>For large areas or polygons, don’t be afraid to create multiple lists, especially when transitioning between habitats or exiting a ‘birdshed’ where larger birds can no longer be tracked.</li>
<li>Transcribe eBird data and manual effort notes into eBird list comments. Put raptor details into the species comments.</li>
<li>When crossing into other teams’ polygons, create separate eBird lists to collect replicate eBird data. These data will be compared and we will use the <em>high counts</em> (e.g.&nbsp;=MAX) for overlapping stationary birds.</li>
<li>Record birds seen between polygons in the species comments with relevant details.</li>
<li>When retracing your steps, don’t just count ‘new’ birds, make a complete list and let the <strong>MAX-SUM algorithm</strong> do the work of figuring out new birds and high-counts.</li>
<li>Do not include birds seen by people outside your CBC party <em>unless you see them too!</em></li>
</ul>
<p>© 2015-2024 Durrell D. Kapan</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>